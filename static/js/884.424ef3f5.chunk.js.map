{"version":3,"file":"static/js/884.424ef3f5.chunk.js","mappings":"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","sources":["pages/MovieDetails.jsx","services/movieApi.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { Link, useParams, Outlet, useLocation } from 'react-router-dom';\nimport { fetchMovieDetails } from 'services/movieApi';\nimport { useEffect, useRef, useState } from 'react';\nimport { Suspense } from 'react';\nimport { Loader } from 'components/Loader/Loader';\nimport poster from '../components/img/poster.jpg';\n\nconst MovieDetails = () => {\n    const [movieDetails, setMovieDetails] = useState(null);\n     const [errorMes, setErrorMes] = useState(null);\n     const location = useLocation();\n     const backLinkHref = useRef(location.state?.from ?? '/movies');\n  const { movieId } = useParams();\n\n\n\n\n\n  // Поясніть, будь ласка, чому компонент рендериться по 3 - 4 рази (консольлог стільки разів спрацьовує) \n  console.log('render MovieDetails');\n useEffect(() => {\n    console.log('render useEf MovieDetails');\n   if (movieDetails) {\n     return;\n   }\n   if (errorMes) { return }\n   const getMovieDetails = async () => {\n     try {\n       const movieDetailsData = await fetchMovieDetails(movieId);\n       const normMovieDetailsData = normalizeMovieDetailsData(movieDetailsData);\n       setMovieDetails(normMovieDetailsData);\n     } catch (error) {\n       setErrorMes(error.message);\n     }\n\n   };\n\n   getMovieDetails();\n });\n\n\n  function normalizeMovieDetailsData({\n    poster_path,\n    title,\n    release_date,\n    vote_average,\n    overview,\n      genres,\n    id,\n  }) {\n    return {\n      poster_path,\n      title,\n      release_date,\n      vote_average,\n      overview,\n        genres,\n      id,\n    };\n  }\n\n  // const { poster_path,\n  //   original_title,\n  //   release_date,\n  //   vote_average,\n  //   overview,\n  //   genres=[]} = movieDetails;\n\n  // console.log(movieDetails);\n\n    const genresData = () => {\n    \n    return movieDetails.genres.map(({ name }) => name).join(', ');\n  };\n\n  const normalizeDate = () => {\n    return Number.parseInt(movieDetails.release_date);\n  };\n\n  const normalizeScore = () => {\n    return Math.round(movieDetails.vote_average * 10);\n  }\n\n   \n  return errorMes ? (\n    <div className=\"alert-wrap\">\n      <h2 className=\"alert-txt\">404 - Page not found!</h2>\n    </div>\n  ) : (\n    movieDetails && (\n      <>\n        <div className=\"details-wrapper\">\n          <div className=\"details-img-wrapper\">\n            {movieDetails.poster_path ? (\n              <img\n                className=\"details-img\"\n                src={`https://image.tmdb.org/t/p/w300${movieDetails.poster_path}`}\n                alt={movieDetails.title}\n                width=\"300px\"\n                height=\"450px\"\n              />\n            ) : (\n              <img\n                className=\"details-noimg details-img\"\n                src={poster}\n                alt={movieDetails.title}\n                width=\"300px\"\n                height=\"450px\"\n              />\n            )}\n          </div>\n          <div className=\"details-txt-wrap\">\n            <h1 className=\"details-main-title\">\n                {movieDetails.title} {movieDetails.release_date && `(${normalizeDate()})`}\n            </h1>\n            <p className=\"details-txt\">User score: {normalizeScore()}%</p>\n            <h2 className=\"details-title\">Overview</h2>\n            <p className=\"details-txt\">{movieDetails.overview}</p>\n            <h2 className=\"details-title\">Genres</h2>\n\n            <span className=\"details-txt\">\n              {movieDetails.genres && genresData()}\n            </span>\n          </div>\n        </div>\n        <div className=\"details-btn-wrap\">\n          <Link className=\"details-btn\" to={backLinkHref.current}>\n            ⬅Go back\n          </Link>\n\n          <Link className=\"details-btn\" to=\"cast\">\n            Cast\n          </Link>\n\n          <Link className=\"details-btn\" to=\"reviews\">\n            Reviews\n          </Link>\n        </div>\n\n        <Suspense fallback={<Loader />}>\n          <Outlet />\n        </Suspense>\n      </>\n    )\n  );\n  \n};\n\nexport default MovieDetails;\n\n\n// return (\n//       movieDetails && (\n          \n          \n//         errorMes ? <div>404</div> :\n//         <>\n//         <div className=\"details-wrapper\">\n//           <div className=\"details-img-wrapper\">\n//             <img\n//               className=\"details-img\"\n//               src={`https://image.tmdb.org/t/p/w300${movieDetails.poster_path}`}\n//               alt={movieDetails.title}\n//               width=\"300px\"\n//             />\n//           </div>\n//           <div className=\"details-txt-wrap\">\n//             <h1 className=\"details-main-title\">\n//               {movieDetails.title} ({normalizeDate()})\n//             </h1>\n//             <p className=\"details-txt\">User score: {normalizeScore()}%</p>\n//             <h2 className=\"details-title\">Overview</h2>\n//             <p className=\"details-txt\">{movieDetails.overview}</p>\n//             <h2 className=\"details-title\">Genres</h2>\n\n//             <span className=\"details-txt\">\n//               {movieDetails.genres && genresData()}\n//             </span>\n//           </div>\n//         </div>\n//         <div className=\"details-btn-wrap\">\n//           <Link className=\"details-btn\" to=\"cast\">\n//             Cast\n//           </Link>\n\n//           <Link className=\"details-btn\" to=\"reviews\">\n//             Reviews\n//           </Link>\n//         </div>\n//         <Outlet />\n//       </>\n//     )\n//   );\n// };\n","\n\nexport function fetchTrendMovie() {\n\n const options = {\n   method: 'GET',\n   headers: {\n     accept: 'application/json',\n     Authorization:\n       'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwOWY5NjI1ZWMwNTYzMDZhMTI5NDBmNzQyZDk4OTVlYiIsInN1YiI6IjY0YzQyMjQ3NDFhYWM0MDEwMTQzMTQ4NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d_HEh-sV3F_dyKiODY0wef4bWi3WrlK7FGhBkulFBZ0',\n   },\n };\n\n  return fetch('https://api.themoviedb.org/3/trending/movie/day', options)\n    .then(response => response.json()\n );\n   \n}\n\n\nexport function fetchTrendTv() {\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwOWY5NjI1ZWMwNTYzMDZhMTI5NDBmNzQyZDk4OTVlYiIsInN1YiI6IjY0YzQyMjQ3NDFhYWM0MDEwMTQzMTQ4NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d_HEh-sV3F_dyKiODY0wef4bWi3WrlK7FGhBkulFBZ0',\n    },\n  };\n\n  return fetch('https://api.themoviedb.org/3/trending/tv/day', options).then(\n    response => response.json()\n  );\n}\n\nexport async function fetchMovieDetails(movieId) {\n\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwOWY5NjI1ZWMwNTYzMDZhMTI5NDBmNzQyZDk4OTVlYiIsInN1YiI6IjY0YzQyMjQ3NDFhYWM0MDEwMTQzMTQ4NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d_HEh-sV3F_dyKiODY0wef4bWi3WrlK7FGhBkulFBZ0',\n  },\n};\n \nreturn fetch(`https://api.themoviedb.org/3/movie/${movieId}`, options)\n  .then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json()\n  })\n \n\n}\n\n\n\nexport function fetchCast(movieId) {\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwOWY5NjI1ZWMwNTYzMDZhMTI5NDBmNzQyZDk4OTVlYiIsInN1YiI6IjY0YzQyMjQ3NDFhYWM0MDEwMTQzMTQ4NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d_HEh-sV3F_dyKiODY0wef4bWi3WrlK7FGhBkulFBZ0',\n    },\n  };\n\n  return fetch(`https://api.themoviedb.org/3/movie/${movieId}/credits?language=en-US`,\n    options\n  )\n    .then(response => response.json())\n  \n}\n\n\nexport function fetchReviews(movieId) {\n\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwOWY5NjI1ZWMwNTYzMDZhMTI5NDBmNzQyZDk4OTVlYiIsInN1YiI6IjY0YzQyMjQ3NDFhYWM0MDEwMTQzMTQ4NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d_HEh-sV3F_dyKiODY0wef4bWi3WrlK7FGhBkulFBZ0',\n    },\n  };\n\n  return fetch(`https://api.themoviedb.org/3/movie/${movieId}/reviews?language=en-US&page=1`,\n    options\n  )\n    .then(response => response.json())\n}\n\n\nexport function fetchMovie(query) {\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwOWY5NjI1ZWMwNTYzMDZhMTI5NDBmNzQyZDk4OTVlYiIsInN1YiI6IjY0YzQyMjQ3NDFhYWM0MDEwMTQzMTQ4NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d_HEh-sV3F_dyKiODY0wef4bWi3WrlK7FGhBkulFBZ0',\n    },\n  };\n\n  return fetch(\n    `https://api.themoviedb.org/3/search/movie?query=${query}&include_adult=false&language=en-US&page=1`,\n    options\n  )\n    .then(response => response.json())\n \n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["useState","movieDetails","setMovieDetails","errorMes","setErrorMes","location","useLocation","backLinkHref","useRef","state","from","movieId","useParams","normalizeMovieDetailsData","poster_path","title","release_date","vote_average","overview","genres","id","console","log","useEffect","getMovieDetails","fetchMovieDetails","movieDetailsData","normMovieDetailsData","message","className","src","alt","width","height","poster","Number","parseInt","Math","round","map","name","join","to","current","Suspense","fallback","fetchTrendMovie","fetch","method","headers","accept","Authorization","then","response","json","fetchTrendTv","options","ok","Error","status","fetchCast","fetchReviews","fetchMovie","query","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined"],"sourceRoot":""}